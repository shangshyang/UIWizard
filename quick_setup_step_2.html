<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>Quick Setup - Step 2: Network Configuration</title>
    <style>
        body {
            background: url('../right_frame.gif') repeat;
            font-family: Arial, sans-serif;
            font-size: 12px;
            margin: 20px;
        }
        table {
            border-collapse: collapse;
            width: 430px;
            margin: 20px auto;
        }
        td {
             border: 2px solid #555; 
            padding: 8px; 
            text-align: left; 
            font-size: 14px;
            font-weight: bold
        }
        input[type="text"] {
            width: 140px;
            padding: 5px;
        }
        select { padding: 5px; }
        input[type="button"] {
            padding: 6px 15px; 
            background: #304b67; 
            color: #fff; 
            border: none; 
            cursor: pointer; 
            font-size: 15px
        }
        div[align="center"] { text-align: center; }
        div[align="right"] { text-align: right; padding-right: 10px; }
        .style1 { 
            font-weight: bold; 
            color: #2c3e50; 
            font-size: 14px; 
            margin: 10px 0; 
            text-align: left;
        }
        .nav-buttons {
            text-align: right;
            padding-right: 10px;
            margin-top: 10px;
        }
    </style>
    <script language="JavaScript" src="../focus.js"></script>
    <script language="JavaScript">
        (function(){
            function load(){
                var forms = document.getElementsByTagName('form');
                for(var i = 0 ; i < forms.length ; i++){
                    var input = document.createElement('input');
                    input.setAttribute('type', 'hidden');
                    input.setAttribute('name', 'c_t');
                    input.setAttribute('value', 'e1b38a4b0d224d9d95ab65cc87b47557');
                    forms[i].appendChild(input);
                }
            }
            window[ window.addEventListener ? 'addEventListener' : 'attachEvent' ]( window.addEventListener ? 'load' : 'onload', load )
        })()

        function ltrim(str) { for(var k=0;k<str.length && isWhitespace(str.charAt(k));k++); return str.substring(k, str.length);}
        function rtrim(str) { for(var j=str.length-1; j>=0 && isWhitespace(str.charAt(j));j--); return str.substring(0,j+1);}
        function trim(str) { return ltrim(rtrim(str));}
        function isWhitespace(char) { var whiteChar = " \t\n\r\f"; return (whiteChar.indexOf(char)!=-1);}

        function check_ip(obj) {
            var errorStr = " is not valid";
            var ipPattern = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
            var ipArray = trim(obj.value).match(ipPattern);
            if(trim(obj.value)=='0.0.0.0' || trim(obj.value)=="255.255.255.255") {
                alert("IP address: " + obj.value + errorStr);
                obj.focus(); obj.select(); return false;
            }
            if(trim(obj.value)=='') return true;
            if(ipArray==null) {
                alert("IP address: " + obj.value + errorStr);
                obj.focus(); obj.select(); return false;
            }
            for(var i=0;i<4;i++) {
                var thisSegment = ipArray[i];
                if(thisSegment > 255) {
                    alert("IP address: " + obj.value + errorStr);
                    obj.focus(); obj.select(); return false;
                }
            }
            return true;
        }

        function goToNextStep() {
            var ip = document.querySelector('input[name="vlanip0"]');
            var mask = document.querySelector('input[name="vlanipmask0"]');
            var gateway = document.querySelector('input[name="gateway"]');
            var dns = document.querySelector('input[name="dnsserver"]');

            if (!check_ip(ip) || !check_ip(mask) || !check_ip(gateway) || !check_ip(dns)) {
                return false;
            }

            parent.mainFrame.location.href = 'quick_setup_step_3.html';
        }

        function goToPrevStep() {
            parent.mainFrame.location.href = 'quick_setup.html';
        }
    </script>
</head>
<body>
    <p class="style1">Step 2: Network Configuration</p>

    <form name="form_ip" method="post">
        <table width="430" border="1" cellspacing="0" align="left">
            <tr bgcolor="#CCCCCC">
                <td width="77"><div align="center">VLAN ID</div></td>
                <td width="145"><div align="center">IP Address</div></td>
                <td width="135"><div align="center">IP Subnet Mask</div></td>
            </tr>
            <tr>
                <td height="37"><div align="center">1</div></td>
                <td><div align="center"><input name="vlanip0" onblur="check_ip(this)" type="text" value="192.168.1.205" size="15" maxlength="15"></div></td>
                <td><div align="center"><input name="vlanipmask0" onblur="check_ip(this)" type="text" value="255.255.255.0" size="15" maxlength="15"></div></td>
            </tr>
            <tr bgcolor="#cccccc">
                <td>Default Gateway</td>
                <td colspan="2">
                    <div align="left" style="padding-left:12px">
                        <select name="setgateway">
                            <option value="1" selected>Enable</option>
                            <option value="0">Disable</option>
                        </select>
                        <input name="gateway" type="text" onblur="check_ip(this)" value="192.168.1.254" size="20" maxlength="15" style="margin-left:43px">
                    </div>
                </td>
            </tr>
            <tr bgcolor="#cccccc">
                <td>DNS Server</td>
                <td colspan="2">
                    <div align="left" style="padding-left:12px">
                        <select name="setdns">
                            <option value="1" selected>Enable</option>
                            <option value="0">Disable</option>
                        </select>
                        <input name="dnsserver" type="text" onblur="check_ip(this)" value="8.8.8.8" size="20" maxlength="15" style="margin-left:43px">
                    </div>
                </td>
            </tr>
            <tr bgcolor="#cccccc">
                <td colspan="2">MAC Address</td>
                <td align="center">00e0.abcd.1234</td>
            </tr>
            <tr>
                <td colspan="3">
                    <div class="nav-buttons">
                        <input type="button" value="Prev. Step" onclick="goToPrevStep()">
                        <input type="button" value="Next Step" onclick="goToNextStep()">
                    </div>
                </td>
            </tr>
        </table>
    </form>
</body>
</html>